= DataDog AWS Integration
:!toc-title:
:!toc-placement:
:toc:

Set up a connection between an AWS Account and DataDog. With this you get more data from AWS, e.g. API GW metrics, SQS
metrics, Aurora/DynamoDB statuses and more.

toc::[]

== Usage

NOTE: Requires link:https://github.com/nsbno/terraform-datadog-provider-setup[`nsbno/terraform-datadog-provider`] module to be set up.


Place this module in all environments in your `-aws` repository, and you will be good to go!

[source, hcl]
----
module "datadog-service" {
  source = "github.com/nsbno/terraform-datadog-aws-integration?ref=x.y.z"

  # Should correspond to the name of the team in Datadog. Lowercase.
  team_name   = aws_ssm_parameter.team_name_handle.value
  environment = var.environment
}
----
=== Example with metrics to include

[source, hcl]
----
module "datadog-service" {
  source = "github.com/nsbno/terraform-datadog-aws-integration?ref=x.y.z"

  # Should correspond to the name of the team in Datadog. Lowercase.
  team_name   = aws_ssm_parameter.team_name_handle.value
  environment = var.environment

  metrics_to_include = ["AWS/Lambda", "AWS/ECS"]
}
----

=== Example with Metric streaming

Useful when you need quicker insight into certain metrics,
for example with high-criticality alerts.

[source, hcl]
----
module "datadog-service" {
  source = "github.com/nsbno/terraform-datadog-aws-integration?ref=x.y.z"

  # Should correspond to the name of the team in Datadog. Lowercase.
  team_name   = aws_ssm_parameter.team_name_handle.value
  environment = var.environment

  # Metric Namespace that should be streamed
  metrics_to_stream = {
    # Will stream all SQS metrics
    "AWS/SQS" = {},

    "AWS/ApplicationELB" = {
      # Only streams the specified metrics under ApplicationELB
      metric_names = ["HealthyHostCount"]
    },
  }
}
----

== Relevant Repositories

You can use these repos together with this repo!

link:https://github.com/nsbno/terraform-datadog-provider-setup[`nsbno/terraform-datadog-provider`]::
Set up a DataDog provider before using this module.

